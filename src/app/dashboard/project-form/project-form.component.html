<form
  [formGroup]="projectForm"
  (ngSubmit)="onSubmit()"
  fxLayout="column"
  fxLayoutAlign="center center"
>
  <!-- TITLE -->
  <mat-form-field class="field">
    <mat-label>Project title</mat-label>
    <input formControlName="title" placeholder="Enter title..." matInput />
  </mat-form-field>

  <!-- DATE PICKER -->
  <mat-form-field class="field">
    <mat-label>Enter a date range</mat-label>
    <mat-date-range-input [formGroup]="projectForm" [rangePicker]="picker">
      <input
        matStartDate
        formControlName="startDate"
        placeholder="Start date"
      />
      <input matEndDate formControlName="finalDate" placeholder="End date" />
    </mat-date-range-input>

    <mat-hint style="font-size: 0.7rem">MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>

    <mat-date-range-picker #picker></mat-date-range-picker>

    <mat-error
      *ngIf="projectForm.controls['startDate']?.hasError('matStartDateInvalid')"
      >Invalid start date</mat-error
    >
    <mat-error
      *ngIf="projectForm.controls['finishDate']?.hasError('matEndDateInvalid')"
      >Invalid end date</mat-error
    >
  </mat-form-field>

  <p>
    <!-- time is off 1 day in json, but not in date pipe?-->
    Selected range: {{ projectForm.value.startDate | date }}
    {{ projectForm.value.finalDate | date }}
  </p>

  <!-- DESCRIPTION -->
  <mat-form-field class="field">
    <mat-label>Description</mat-label>
    <textarea matInput></textarea>
  </mat-form-field>

  <!-- TEAM SELECT -->
  <mat-form-field class="field">
    <mat-label>Team</mat-label>
    <mat-select
      [formControl]="projectForm.controls['team'] | formControl"
      multiple
    >
      <mat-select-trigger>
        {{(projectForm.controls['team'].value?.[0] | nameExtraction)  || ''}}
        <span
          *ngIf="(projectForm.controls['team'].value?.length || 0) > 1"
          class="additional-selection"
        >
          (+{{ (projectForm.controls["team"].value?.length || 0) - 1 }}
          {{
            projectForm.controls["team"].value?.length === 2
              ? "other"
              : "others"
          }})
        </span>
      </mat-select-trigger>
      <mat-option *ngFor="let member of members$ | async" [value]="member"
        >{{ member.firstName }} {{ member.lastName }}</mat-option
      >
    </mat-select>
  </mat-form-field>

  <button
    mat-raised-button
    [disabled]="projectForm.invalid"
    color="primary"
    class="create-btn"
  >
    CREATE PROJECT
  </button>
</form>
